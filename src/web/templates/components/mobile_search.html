<div class="mobile-search-overlay">
    <div class="mobile-search-bar">
        <button class="back-btn" aria-label="Volver"
                hx-get="/api/v1/close-mobile-search"
                hx-target="#mobile-search-container"
                hx-swap="innerHTML">
            <img src="/static/img/arrow-left.svg" alt="Volver" width="20" height="20" />
        </button>
        <div class="search-input-container" role="search">
            <img class="search-icon" src="/static/img/search.svg" alt="Buscar" width="18" height="18" />
            <input type="search" name="q" placeholder="Busca tu producto..." aria-label="Buscar"
                   hx-get="/api/v1/search-suggestions"
                   hx-trigger="input changed delay:300ms"
                   hx-target="#mobile-search-results"
                   autocomplete="off"
                   id="mobile-search-input" />
        </div>
    </div>
    <div id="mobile-search-results" class="mobile-search-results"></div>
</div>

<script>
    // Auto-focus en el input cuando se carga
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('mobile-search-input');
        if (searchInput) {
            setTimeout(function() {
                searchInput.focus();
            }, 100);
        }
    });
    
    // Focus despu√©s de cargar con HTMX
    document.body.addEventListener('htmx:afterSwap', function(evt) {
        if (evt.detail.target.id === 'mobile-search-container') {
            const searchInput = document.getElementById('mobile-search-input');
            if (searchInput) {
                setTimeout(function() {
                    searchInput.focus();
                }, 100);
            }
        }
    });
</script>
