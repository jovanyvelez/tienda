<div class="header-mobile-search" id="header-content">
    <button type="button" class="back-btn-mobile" 
            hx-get="/api/v1/header/normal-mode"
            hx-target="#header-content"
            hx-swap="outerHTML"
            aria-label="Volver">
        <img src="/static/img/arrow-left.svg" alt="Volver" width="20" height="20" />
    </button>
    <div class="search-mobile" role="search">
        <img class="icon" src="/static/img/search.svg" alt="Buscar" width="18" height="18" />
        <input type="search" name="q" placeholder="Busca tu producto..." aria-label="Buscar"
               hx-get="/api/v1/search-suggestions"
               hx-trigger="input changed delay:300ms"
               hx-target="#search-results-mobile"
               autocomplete="off"
               id="mobile-search-input" />
    </div>
    <div id="search-results-mobile" class="search-results-mobile"></div>
    
    <script>
        // Auto-focus después de que el elemento esté completamente cargado
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('mobile-search-input');
            if (searchInput) {
                // Pequeño delay para asegurar que todo esté renderizado
                setTimeout(function() {
                    searchInput.focus();
                }, 100);
            }
        });
        
        // Si se carga via HTMX, también hacer focus
        document.body.addEventListener('htmx:afterSwap', function(evt) {
            if (evt.detail.target.id === 'header-content') {
                const searchInput = document.getElementById('mobile-search-input');
                if (searchInput) {
                    setTimeout(function() {
                        searchInput.focus();
                    }, 100);
                }
            }
        });
    </script>
</div>
